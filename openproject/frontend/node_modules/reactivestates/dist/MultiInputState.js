"use strict";function multiInput(){return new MultiInputState}var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var rxjs_1=require("rxjs"),ReplaySubject_1=require("rxjs/ReplaySubject"),InputState_1=require("./InputState"),State_1=require("./State"),MultiInputState=function(t){function e(){var e=this,n=new ReplaySubject_1.ReplaySubject(1),r=function(t,e){e({})},u=function(t,n){e.clear(),n({})};return e=t.call(this,n.asObservable(),function(t){return void 0===t},r,u)||this,e.cache$=n,e.change$=new rxjs_1.Subject,e.remove$=new rxjs_1.Subject,e}return __extends(e,t),e.prototype.clear=function(){for(var t in this.value)this.value[t].disconnect();return this.cache$.next({}),this},e.prototype.get=function(t){var e=this;if(void 0===this.value[t]){var n=InputState_1.input();this.name&&(n.name=this.name+"["+t+"]"),this.value[t]=n,n.changes$().takeUntil(this.observeRemove().filter(function(e){return e===t})).subscribe(function(r){e.change$.next([t,r,n])}),this.cache$.next(this.value)}return this.value[t]},e.prototype.remove=function(t){var e=this.value[t];return void 0!==e&&(e.disconnect(),delete this.value[t],this.cache$.next(this.value),this.remove$.next(t)),e},e.prototype.observeChange=function(){return this.change$.asObservable()},e.prototype.observeRemove=function(){return this.remove$.asObservable()},e}(State_1.State);exports.MultiInputState=MultiInputState,exports.multiInput=multiInput;
//# sourceMappingURL=MultiInputState.js.map
